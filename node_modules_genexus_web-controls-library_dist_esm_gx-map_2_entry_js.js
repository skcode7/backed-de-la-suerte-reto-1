"use strict";
(self["webpackChunkgenexus_web_application"] = self["webpackChunkgenexus_web_application"] || []).push([["node_modules_genexus_web-controls-library_dist_esm_gx-map_2_entry_js"],{

/***/ 8374:
/*!*******************************************************************************!*\
  !*** ./node_modules/@genexus/web-controls-library/dist/esm/gx-map_2.entry.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "gx_map": () => (/* binding */ Map),
/* harmony export */   "gx_map_marker": () => (/* binding */ MapMarker)
/* harmony export */ });
/* harmony import */ var _index_10623738_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-10623738.js */ 9689);
/* harmony import */ var _coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./coordsValidate-cde38689.js */ 1059);



function watchPosition(success, error, options) {
    return navigator.geolocation.watchPosition(success, error, options);
}

const mapCss = ".leaflet-pane,.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-tile-container,.leaflet-pane>svg,.leaflet-pane>canvas,.leaflet-zoom-box,.leaflet-image-layer,.leaflet-layer{position:absolute;left:0;top:0}.leaflet-container{overflow:hidden}.leaflet-tile,.leaflet-marker-icon,.leaflet-marker-shadow{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}.leaflet-tile::-moz-selection{background:transparent}.leaflet-tile::selection{background:transparent}.leaflet-safari .leaflet-tile{image-rendering:-webkit-optimize-contrast}.leaflet-safari .leaflet-tile-container{width:1600px;height:1600px;-webkit-transform-origin:0 0}.leaflet-marker-icon,.leaflet-marker-shadow{display:block}.leaflet-container .leaflet-overlay-pane svg,.leaflet-container .leaflet-marker-pane img,.leaflet-container .leaflet-shadow-pane img,.leaflet-container .leaflet-tile-pane img,.leaflet-container img.leaflet-image-layer,.leaflet-container .leaflet-tile{max-width:none !important;max-height:none !important}.leaflet-container.leaflet-touch-zoom{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.leaflet-container.leaflet-touch-drag{-ms-touch-action:pinch-zoom;touch-action:none;touch-action:pinch-zoom}.leaflet-container.leaflet-touch-drag.leaflet-touch-zoom{-ms-touch-action:none;touch-action:none}.leaflet-container{-webkit-tap-highlight-color:transparent}.leaflet-container a{-webkit-tap-highlight-color:rgba(51, 181, 229, 0.4)}.leaflet-tile{-webkit-filter:inherit;filter:inherit;visibility:hidden}.leaflet-tile-loaded{visibility:inherit}.leaflet-zoom-box{width:0;height:0;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:800}.leaflet-overlay-pane svg{-moz-user-select:none}.leaflet-pane{z-index:400}.leaflet-tile-pane{z-index:200}.leaflet-overlay-pane{z-index:400}.leaflet-shadow-pane{z-index:500}.leaflet-marker-pane{z-index:600}.leaflet-tooltip-pane{z-index:650}.leaflet-popup-pane{z-index:700}.leaflet-map-pane canvas{z-index:100}.leaflet-map-pane svg{z-index:200}.leaflet-vml-shape{width:1px;height:1px}.lvml{behavior:url(#default#VML);display:inline-block;position:absolute}.leaflet-control{position:relative;z-index:800;pointer-events:visiblePainted;pointer-events:auto}.leaflet-top,.leaflet-bottom{position:absolute;z-index:1000;pointer-events:none}.leaflet-top{top:0}.leaflet-right{right:0}.leaflet-bottom{bottom:0}.leaflet-left{left:0}.leaflet-control{float:left;clear:both}.leaflet-right .leaflet-control{float:right}.leaflet-top .leaflet-control{margin-top:10px}.leaflet-bottom .leaflet-control{margin-bottom:10px}.leaflet-left .leaflet-control{margin-left:10px}.leaflet-right .leaflet-control{margin-right:10px}.leaflet-fade-anim .leaflet-tile{will-change:opacity}.leaflet-fade-anim .leaflet-popup{opacity:0;-webkit-transition:opacity 0.2s linear;-moz-transition:opacity 0.2s linear;transition:opacity 0.2s linear}.leaflet-fade-anim .leaflet-map-pane .leaflet-popup{opacity:1}.leaflet-zoom-animated{-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0}.leaflet-zoom-anim .leaflet-zoom-animated{will-change:transform}.leaflet-zoom-anim .leaflet-zoom-animated{-webkit-transition:-webkit-transform 0.25s cubic-bezier(0,0,0.25,1);-moz-transition:-moz-transform 0.25s cubic-bezier(0,0,0.25,1);transition:-webkit-transform 0.25s cubic-bezier(0,0,0.25,1);transition:transform 0.25s cubic-bezier(0,0,0.25,1);transition:transform 0.25s cubic-bezier(0,0,0.25,1), -webkit-transform 0.25s cubic-bezier(0,0,0.25,1)}.leaflet-zoom-anim .leaflet-tile,.leaflet-pan-anim .leaflet-tile{-webkit-transition:none;-moz-transition:none;transition:none}.leaflet-zoom-anim .leaflet-zoom-hide{visibility:hidden}.leaflet-interactive{cursor:pointer}.leaflet-grab{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.leaflet-crosshair,.leaflet-crosshair .leaflet-interactive{cursor:crosshair}.leaflet-popup-pane,.leaflet-control{cursor:auto}.leaflet-dragging .leaflet-grab,.leaflet-dragging .leaflet-grab .leaflet-interactive,.leaflet-dragging .leaflet-marker-draggable{cursor:move;cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.leaflet-marker-icon,.leaflet-marker-shadow,.leaflet-image-layer,.leaflet-pane>svg path,.leaflet-tile-container{pointer-events:none}.leaflet-marker-icon.leaflet-interactive,.leaflet-image-layer.leaflet-interactive,.leaflet-pane>svg path.leaflet-interactive,svg.leaflet-image-layer.leaflet-interactive path{pointer-events:visiblePainted;pointer-events:auto}.leaflet-container{background:#ddd;outline:0}.leaflet-container a{color:#0078A8}.leaflet-container a.leaflet-active{outline:2px solid orange}.leaflet-zoom-box{border:2px dotted #38f;background:rgba(255,255,255,0.5)}.leaflet-container{font:12px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif}.leaflet-bar{-webkit-box-shadow:0 1px 5px rgba(0,0,0,0.65);box-shadow:0 1px 5px rgba(0,0,0,0.65);border-radius:4px}.leaflet-bar a,.leaflet-bar a:hover{background-color:#fff;border-bottom:1px solid #ccc;width:26px;height:26px;line-height:26px;display:block;text-align:center;text-decoration:none;color:black}.leaflet-bar a,.leaflet-control-layers-toggle{background-position:50% 50%;background-repeat:no-repeat;display:block}.leaflet-bar a:hover{background-color:#f4f4f4}.leaflet-bar a:first-child{border-top-left-radius:4px;border-top-right-radius:4px}.leaflet-bar a:last-child{border-bottom-left-radius:4px;border-bottom-right-radius:4px;border-bottom:none}.leaflet-bar a.leaflet-disabled{cursor:default;background-color:#f4f4f4;color:#bbb}.leaflet-touch .leaflet-bar a{width:30px;height:30px;line-height:30px}.leaflet-touch .leaflet-bar a:first-child{border-top-left-radius:2px;border-top-right-radius:2px}.leaflet-touch .leaflet-bar a:last-child{border-bottom-left-radius:2px;border-bottom-right-radius:2px}.leaflet-control-zoom-in,.leaflet-control-zoom-out{font:bold 18px 'Lucida Console', Monaco, monospace;text-indent:1px}.leaflet-touch .leaflet-control-zoom-in,.leaflet-touch .leaflet-control-zoom-out{font-size:22px}.leaflet-control-layers{-webkit-box-shadow:0 1px 5px rgba(0,0,0,0.4);box-shadow:0 1px 5px rgba(0,0,0,0.4);background:#fff;border-radius:5px}.leaflet-control-layers-toggle{background-image:url(images/layers.png);width:36px;height:36px}.leaflet-retina .leaflet-control-layers-toggle{background-image:url(images/layers-2x.png);background-size:26px 26px}.leaflet-touch .leaflet-control-layers-toggle{width:44px;height:44px}.leaflet-control-layers .leaflet-control-layers-list,.leaflet-control-layers-expanded .leaflet-control-layers-toggle{display:none}.leaflet-control-layers-expanded .leaflet-control-layers-list{display:block;position:relative}.leaflet-control-layers-expanded{padding:6px 10px 6px 6px;color:#333;background:#fff}.leaflet-control-layers-scrollbar{overflow-y:scroll;overflow-x:hidden;padding-right:5px}.leaflet-control-layers-selector{margin-top:2px;position:relative;top:1px}.leaflet-control-layers label{display:block}.leaflet-control-layers-separator{height:0;border-top:1px solid #ddd;margin:5px -10px 5px -6px}.leaflet-default-icon-path{background-image:url(images/marker-icon.png)}.leaflet-container .leaflet-control-attribution{background:#fff;background:rgba(255, 255, 255, 0.7);margin:0}.leaflet-control-attribution,.leaflet-control-scale-line{padding:0 5px;color:#333}.leaflet-control-attribution a{text-decoration:none}.leaflet-control-attribution a:hover{text-decoration:underline}.leaflet-container .leaflet-control-attribution,.leaflet-container .leaflet-control-scale{font-size:11px}.leaflet-left .leaflet-control-scale{margin-left:5px}.leaflet-bottom .leaflet-control-scale{margin-bottom:5px}.leaflet-control-scale-line{border:2px solid #777;border-top:none;line-height:1.1;padding:2px 5px 1px;font-size:11px;white-space:nowrap;overflow:hidden;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;background:#fff;background:rgba(255, 255, 255, 0.5)}.leaflet-control-scale-line:not(:first-child){border-top:2px solid #777;border-bottom:none;margin-top:-2px}.leaflet-control-scale-line:not(:first-child):not(:last-child){border-bottom:2px solid #777}.leaflet-touch .leaflet-control-attribution,.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{-webkit-box-shadow:none;box-shadow:none}.leaflet-touch .leaflet-control-layers,.leaflet-touch .leaflet-bar{border:2px solid rgba(0,0,0,0.2);background-clip:padding-box}.leaflet-popup{position:absolute;text-align:center;margin-bottom:20px}.leaflet-popup-content-wrapper{padding:1px;text-align:left;border-radius:12px}.leaflet-popup-content{margin:13px 19px;line-height:1.4}.leaflet-popup-content p{margin:18px 0}.leaflet-popup-tip-container{width:40px;height:20px;position:absolute;left:50%;margin-left:-20px;overflow:hidden;pointer-events:none}.leaflet-popup-tip{width:17px;height:17px;padding:1px;margin:-10px auto 0;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.leaflet-popup-content-wrapper,.leaflet-popup-tip{background:white;color:#333;-webkit-box-shadow:0 3px 14px rgba(0,0,0,0.4);box-shadow:0 3px 14px rgba(0,0,0,0.4)}.leaflet-container a.leaflet-popup-close-button{position:absolute;top:0;right:0;padding:4px 4px 0 0;border:none;text-align:center;width:18px;height:14px;font:16px/14px Tahoma, Verdana, sans-serif;color:#c3c3c3;text-decoration:none;font-weight:bold;background:transparent}.leaflet-container a.leaflet-popup-close-button:hover{color:#999}.leaflet-popup-scrolled{overflow:auto;border-bottom:1px solid #ddd;border-top:1px solid #ddd}.leaflet-oldie .leaflet-popup-content-wrapper{-ms-zoom:1}.leaflet-oldie .leaflet-popup-tip{width:24px;margin:0 auto;-ms-filter:\"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)\";filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)}.leaflet-oldie .leaflet-popup-tip-container{margin-top:-1px}.leaflet-oldie .leaflet-control-zoom,.leaflet-oldie .leaflet-control-layers,.leaflet-oldie .leaflet-popup-content-wrapper,.leaflet-oldie .leaflet-popup-tip{border:1px solid #999}.leaflet-div-icon{background:#fff;border:1px solid #666}.leaflet-tooltip{position:absolute;padding:6px;background-color:#fff;border:1px solid #fff;border-radius:3px;color:#222;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.4);box-shadow:0 1px 3px rgba(0,0,0,0.4)}.leaflet-tooltip.leaflet-clickable{cursor:pointer;pointer-events:auto}.leaflet-tooltip-top:before,.leaflet-tooltip-bottom:before,.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{position:absolute;pointer-events:none;border:6px solid transparent;background:transparent;content:\"\"}.leaflet-tooltip-bottom{margin-top:6px}.leaflet-tooltip-top{margin-top:-6px}.leaflet-tooltip-bottom:before,.leaflet-tooltip-top:before{left:50%;margin-left:-6px}.leaflet-tooltip-top:before{bottom:0;margin-bottom:-12px;border-top-color:#fff}.leaflet-tooltip-bottom:before{top:0;margin-top:-12px;margin-left:-6px;border-bottom-color:#fff}.leaflet-tooltip-left{margin-left:-6px}.leaflet-tooltip-right{margin-left:6px}.leaflet-tooltip-left:before,.leaflet-tooltip-right:before{top:50%;margin-top:-6px}.leaflet-tooltip-left:before{right:0;margin-right:-12px;border-left-color:#fff}.leaflet-tooltip-right:before{left:0;margin-left:-12px;border-right-color:#fff}.gx-line-clamp{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--max-lines);overflow:hidden}.line-measuring{visibility:hidden;position:absolute}gx-map{display:block}gx-map[hidden]{display:none !important}gx-map[hidden][invisible-mode=keep-space]{display:block !important;visibility:hidden}gx-map .gxMapContainer{height:568px;width:100%}gx-map .gxMapContainer .gxMap{height:100%;width:100%}gx-map .gx-default-selection-layer-icon,gx-map .gx-default-icon,gx-map .gx-default-user-location-icon{background-color:transparent;border:none;background-repeat:no-repeat;background-size:contain;background-position:center}gx-map .gx-default-user-location-icon{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAXCAYAAADgKtSgAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAM7SURBVEiJnVXNa9xVFD33vvebSacx08Q2U1GwaQW1WSSZ6VQQIdaisQNdFMymoKJU+zf000FGl650oaJQRKiRWlE0CxdpEYs0H52kFqO1UoRapqVmpEnn6717XWhCzLxJtGf5zr3nnfs+7iW0wvCISWe25CCyzwtnVTQFYAOAMjGVDMs4mE9PVbNfIU8SkqDQYn9hYlhFXneqj3ghaItEwwpLOkssx4tHH/90dfH8mE1H69+pOrzqg17CsAzEjP+k7jpeuJTvrTeJZ96diHzJf1MTGpSQ1TXADMRJz5qUeXry4I4GAPAiqTf1g5renTAAiABVwaDc9O//y3mmcG64InbE+7sTXg7LQAz03IXXsqcIwyOmr+/BmWqDtoeCSR3ijVuI/DxIHYQiONOOWqwLChvcoC3CT9PTV3spXTi/t+b1CyfND8f4CrrkGl58cjueTW9FdzKBUnkBo5O/4sTZH1G298Pzumb3BrCke819T718qO65f2UAq8e9/je8/cpu5DLb0JGIwzAjmYgj89BmDPR048zEDComiWVXBwBQBeKGauyUMqE7jDVu4fnBR9G3pTtYenprCvufeBix+h9NnAJwKjsYilQo2fp5DA30BIUXMTTQg8jPh0lFihWcDHGsDt0d61cV35RMgDT8xJRoAxNpOUQKRbhebuHqH1yfW4CyCXIEzDGgpRDZsO0Ynbyyqvjo1BU0zD0tWC2xYZoIda+67cLH317G+Z9/D6aem72Gk9/9gnrUGXINAx03m3e/5FV5v+iKLYhR5wTGJi9ioVJFZ3sbjGFcvfEnPjrzA976sojbsQcgFGsStwwwmWME5LmvkJupNtAbckjqEXNziNw8CA5CFs60o267oMShFLQZzE5LttcCeTGaO24MToV6i5JBLdqIWrQxKBRyTVYP4TAJA8DUsZ2fxUlPcNjIfwaRIm70w+Lhxz4Hlv3bC/7OgbiRMQ7OprXBDLRZHZtydw4urS2x+V2u6CrPrIvkPfM/K7CsiDFOmk12CPldbqmSUHD/m9/n1HPBiQ6sOUMNXSLWo4tHsTKmBfLc/8aePSSyT8FZ+bsHdQKYY0KJIOPKfLp4ZOfXAAXn11+IRkSUOZv6dwAAAABJRU5ErkJggg==\")}gx-map .gx-default-icon{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII\")}gx-map .gx-default-selection-layer-icon{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAoCAYAAAALz1FrAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATySURBVEiJrZVbiF3VGcd/39p7n8ucM3OOl4xgzFTF6ENA1ASkRaRqxfZBbPuQgmIfRIIiXl40JsEyVWsUbSuIIkIpWJ/S2hdbGynagBZqLN5AjBqjZjJ4SWaSM+e619prfX1wJiSTvefMjP3D97L2Xt9vfZe1PmEJPXo+Dc2SX0Si1yts1CDNABUj9A3MgO7NkJds3704eZhOkR/JW5y8gLFKmjyCcEuzTDitJLV6IsQGYoEsgA3Qccpsqp22w6DyzGBgf50HOwXy8LpkUyz6j9MrUpuoSTU2uec4STbAVDv0jlltZ15+vGPavVsI+c3a+KrIyEsXNGSkUZLh3hfpaIoemAu9gP5k+1T2+imQh84uX1SKw1vrGzJaT1bs/7jaVvlkTtvBm03bp9OPAQzALojKcfjLOTWp1RJBYdVWLwlra1KLovDXXRAdhxyYSG4qx5x7RkWMKnxXW1MRU47le5+uS24+DkF56OwRqQ87Zc/DnFN6fnhE59SoR6IPK0i0cyLZmETctnbElIvy3ErhSxmjfvH3GbvkCgbJKNNfzxJ7S6mg+xIjzKSwpx69FovXnzYrpqoFgJlUSdZfyubf/hETxcfXs36Pv92+mXDkc0ZL+aBGSWqHAzeYKJarRxLivJBdUPq1NVz3++dPAgDE1RGuf+5FZswoQfNTVouJIrjG+KDrK0ZyC9hKYcPPboSCKxOVypx/5TXMufwGKEeCajjPqEjTmPyTDDyctfEHBYn8VuMXbyLNNHd/JBBEmrEqkcyHu1giYFtHl4SkrWOIfHvyxVpYMiJkRTkdiWH/y39eEvLZnt2MxPkX2CuIkhmDztqiwiXC1JtvMPvJh7mAQ//ZQ+vAPkpR/n4XQAzfRNc2o59XY9YV9XtVPO/t/julyghnXLgBMQbvLO8//wz/ffZxxmOXPy+AroOeDXvl0Yn4V82S2bGmKqWilASFloM0qROVygTbp+K6NArux4K+6oVBy7HNhCCvtJ2mS71FAjQTOIsOZ9oZxukxluS3/YnWceoxsttsO+T2etVOfxnv0Uqs5xVVmd7+ud1nBDTAk7OD0P1/QmYGdBQeg/lXOEmzp/ueLPUrf9bzrO+U1Ife6ePuTzA/VP7ZxV3ViLppxpWjpeIGWK6+7mvbe3PXPR/5d+GE8bsLogMTyf7xCudW49WP365Dj6S6b+tBt0HmL71Z+LgZfAjhjiMDVl2bAMykoQe6ZQFwEgRg+yH/ssI7LathNZCW1SzAv+4/mL1xot+TIACIbDmWkmZhZcX2XmlZbKbRPYtdngLZ+oX9ENg1Z0lXEsVRS1+VZx+YSj8dCgFQ5+7tZJrZsDyA9dDzWJO4B/P8RXmLr3boXds0ZIHLq9Hwlp5Jte0z7tt2MPw773tuJACDevZE6rUz8PlTb8H6Hlxg1k67PxT5KoRMfoANmLvnLJ2lCt5KtYvqlknIinwNvXU7J5K3xxK5pBqf+m/Xaeg4Xt825X64lI/CSBYUhFvnXOgvHtFBoeMYiMgdw3wMhez4wr2N8ko3w52YprYlRXnh/oP2g+8MAfCa3Nl16vx8NC5AP1OXBLdjOftzW3ixXpvL2lc34noIelkpklLHaTcYndx6KLy6nP3LigTADewjNqjteSVTbaX17Knl7l1WJAB7etgfNaLDLnCDYn75wH4/tBar0iSYneuS36103/8A3ul8UMJ+7p4AAAAASUVORK5CYII=\")}";

const MIN_ZOOM = 1;
const RECOMMENDED_MAX_ZOOM = 20;
const Map = class {
    constructor(hostRef) {
        (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.gxMapDidLoad = (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "gxMapDidLoad", 7);
        this.mapClick = (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "mapClick", 7);
        this.selectionInput = (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "selectionInput", 7);
        this.selectionChange = (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "selectionChange", 7);
        this.userLocationChange = (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "userLocationChange", 7);
        this.isSelectionLayerSlot = false;
        this.markersList = [];
        this.linesList = [];
        this.mapTypesProviders = {
            hybrid: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",
            satellite: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
            standard: "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
        };
        /**
         * The coord of initial center of the map.
         *
         */
        this.center = "0, 0";
        /**
         * Enable the High Accuracy in user location.
         * _Note: This property applies when ```watchPosition = true```._
         */
        this.highAccuracyLocator = true;
        /**
         * Map type to be used.
         * _Note: If you set a map provider, the selected map type will be ignored._
         *
         */
        this.mapType = "standard";
        /**
         * The max zoom level available in the map.
         * _Note: 20 is the best value to be used, only lower values are allowed. Is highly recommended to no change this value if you are not sure about the `maxZoom` supported by the map._
         */
        this.maxZoom = RECOMMENDED_MAX_ZOOM;
        /**
         * Enables the possibility to navigate the map and select a location point using the map center.
         */
        this.selectionLayer = false;
        /**
         * Indicates if the current location of the device is displayed on the map.
         */
        this.watchPosition = false;
        /**
         * The initial zoom level in the map.
         *
         */
        this.zoom = 1;
    }
    userLocationHandler() {
        this.userLocationChange.emit(this.userLocationCoords);
    }
    selectionLayerHandler() {
        this.registerSelectionLayerEvents();
    }
    onMapMarkerDidLoad(event) {
        const markerElement = event.target;
        const markerV = event.detail;
        if (this.map) {
            markerV.addTo(this.map);
        }
        else {
            this.element.addEventListener("gxMapDidLoad", () => {
                markerV.addTo(this.map);
            });
        }
        if (this.selectionLayer) {
            const slot = this.getSelectionMarkerSlot();
            if (slot.exist) {
                this.selectionMarker = slot.elem;
            }
            else {
                this.selectionMarker = this.element.querySelector("[marker-class='gx-default-selection-layer-icon']");
            }
            if (markerElement !== this.selectionMarker) {
                this.markersList.push(markerV);
            }
        }
        else {
            this.markersList.push(markerV);
        }
        markerElement.addEventListener("gxMapMarkerDeleted", () => {
            this.onMapMarkerDeleted(markerV);
        });
    }
    onMapLineDidLoad(event) {
        const lineElement = event.target;
        const lineV = event.detail;
        if (this.map) {
            lineV.addTo(this.map);
        }
        else {
            this.element.addEventListener("gxMapDidLoad", () => {
                lineV.addTo(this.map);
            });
        }
        lineElement.addEventListener("gxMapLineDeleted", () => {
            this.onMapLineDeleted(lineV);
        });
    }
    addMapListener(eventToListen, callbackFunction) {
        this.map.on(eventToListen, callbackFunction);
    }
    removeMapListener(eventToListen, callbackFunction) {
        this.map.off(eventToListen, callbackFunction);
    }
    checkForMaxZoom() {
        return this.maxZoom < 20 ? this.maxZoom : RECOMMENDED_MAX_ZOOM;
    }
    fitBounds() {
        if (this.markersList.length > 1) {
            const markersGroup = new _coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.F(this.markersList);
            this.map.fitBounds(markersGroup.getBounds());
        }
        else if (this.markersList.length === 1) {
            const [marker] = this.markersList;
            const markerCoords = [marker._latlng.lat, marker._latlng.lng];
            this.map.setView(markerCoords, this.zoom);
        }
    }
    getZoom() {
        return this.zoom > 0
            ? this.zoom < RECOMMENDED_MAX_ZOOM
                ? this.zoom
                : RECOMMENDED_MAX_ZOOM - 1
            : MIN_ZOOM;
    }
    getSelectionMarkerSlot() {
        const slot = this.element.querySelector("[slot='selection-layer-marker']");
        return { exist: slot !== null, elem: slot };
    }
    onMapMarkerDeleted(marker) {
        let i = 0;
        marker.remove();
        while (i < this.markersList.length &&
            this.markersList[i]._leaflet_id !== marker._leaflet_id) {
            i++;
        }
        if (i <= this.markersList.length) {
            this.markersList.splice(i, 1);
        }
        else {
            console.warn("There was an error in the markers list!");
        }
    }
    onMapLineDeleted(line) {
        let i = 0;
        line.remove();
        while (i <= this.linesList.length &&
            this.linesList[i]._leaflet_id !== line._leaflet_id) {
            i++;
        }
        if (i <= this.linesList.length) {
            this.linesList.splice(i, 1);
        }
        else {
            console.warn("There was an error in the line list!");
        }
    }
    updateSelectionMarkerPosition() {
        const centerCoords = this.map.getCenter();
        this.centerCoords = `${centerCoords.lat},${centerCoords.lng}`;
        this.selectionMarker.setAttribute("coords", this.centerCoords);
    }
    registerSelectionLayerEvents() {
        if (this.selectionLayer) {
            const moveBehaivor = {
                eventTrigger: "move",
                callbackFunction: () => {
                    this.updateSelectionMarkerPosition();
                    this.selectionInput.emit(this.centerCoords);
                }
            };
            const moveEndBehaivor = {
                eventTrigger: "moveend",
                callbackFunction: () => {
                    this.updateSelectionMarkerPosition();
                    this.selectionChange.emit(this.centerCoords);
                }
            };
            if (this.selectionLayer) {
                this.addMapListener(moveBehaivor.eventTrigger, moveBehaivor.callbackFunction);
                this.addMapListener(moveEndBehaivor.eventTrigger, moveEndBehaivor.callbackFunction);
            }
            else {
                this.removeMapListener(moveBehaivor.eventTrigger, moveBehaivor.callbackFunction);
                this.removeMapListener(moveEndBehaivor.eventTrigger, moveEndBehaivor.callbackFunction);
            }
        }
    }
    selectingTypes(mapType) {
        const tileLayerToApply = (0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.t)(mapType, {
            maxZoom: this.maxZoom
        });
        tileLayerToApply.addTo(this.map);
        this.mapProviderApplied = tileLayerToApply;
    }
    setMapProvider() {
        if (this.mapProviderApplied && this.tileLayerApplied) {
            this.tileLayerApplied.removeFrom(this.map);
        }
        if (this.mapProvider) {
            const tileLayerToApply = (0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.t)(this.mapProvider, {
                maxZoom: this.maxZoom
            });
            tileLayerToApply.addTo(this.map);
            this.mapProviderApplied = this.mapProvider;
            this.tileLayerApplied = tileLayerToApply;
        }
        else {
            if (!this.mapType || this.mapType === "standard") {
                this.selectingTypes(this.mapTypesProviders.standard);
            }
            else {
                if (this.mapType === "hybrid") {
                    this.selectingTypes(this.mapTypesProviders.hybrid);
                }
                else if (this.mapType === "satellite") {
                    this.selectingTypes(this.mapTypesProviders.satellite);
                }
            }
        }
    }
    setUserLocation({ coords }) {
        this.userLocationCoords = `${coords.latitude}, ${coords.longitude}`;
    }
    componentWillLoad() {
        if (this.watchPosition) {
            this.watchPositionId = watchPosition(this.setUserLocation.bind(this), err => console.error(err), {
                enableHighAccuracy: this.highAccuracyLocator
            });
        }
        if (this.selectionLayer && this.getSelectionMarkerSlot().exist) {
            this.isSelectionLayerSlot = true;
        }
    }
    componentDidLoad() {
        const elementVar = this.element.querySelector(".gxMap");
        const coords = (0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.p)(this.center);
        this.maxZoom = this.checkForMaxZoom();
        this.zoom = this.getZoom();
        if (coords !== null) {
            this.map = (0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.c)(elementVar).setView(coords, this.zoom, this.maxZoom);
        }
        else {
            console.warn("GX warning: Can not read 'center' attribute, default center set (gx-map)", this.element);
            this.map = (0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.c)(elementVar).setView([0, 0], this.getZoom());
        }
        this.setMapProvider();
        this.map.setMaxZoom(this.maxZoom);
        this.fitBounds();
        this.gxMapDidLoad.emit(this);
        if (this.selectionLayer) {
            this.updateSelectionMarkerPosition();
            this.registerSelectionLayerEvents();
        }
        this.addMapListener("popupopen", function (e) {
            const px = this.project(e.target._popup._latlng);
            px.y -= e.target._popup._container.clientHeight / 2;
            this.panTo(this.unproject(px), { animate: true });
        });
        this.addMapListener("click", ev => {
            this.mapClick.emit(ev.latlng);
        });
    }
    componentDidUpdate() {
        const maxZoom = this.checkForMaxZoom();
        this.setMapProvider();
        if (this.selectionLayer) {
            this.fitBounds();
        }
        this.map.setMaxZoom(maxZoom);
        this.userLocationChange.emit(this.userLocationCoords);
    }
    componentDidUnload() {
        navigator.geolocation.clearWatch(this.watchPositionId);
    }
    render() {
        return ((0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.H, null, this.watchPosition && ((0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.h)("gx-map-marker", { "marker-class": "gx-default-user-location-icon", "icon-width": "15", "icon-height": "15", coords: this.userLocationCoords })), this.selectionLayer &&
            (this.isSelectionLayerSlot ? ((0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "selection-layer-marker" })) : ((0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.h)("gx-map-marker", { "marker-class": "gx-default-selection-layer-icon", "icon-width": "30", "icon-height": "30", coords: this.centerCoords }))), (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "gxMapContainer" }, (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "gxMap" }))));
    }
    get element() { return (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
    static get watchers() { return {
        "userLocationCoords": ["userLocationHandler"],
        "selectionLayer": ["selectionLayerHandler"]
    }; }
};
Map.style = mapCss;

const mapMarkerCss = ".gx-line-clamp{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:var(--max-lines);overflow:hidden}.line-measuring{visibility:hidden;position:absolute}gx-map-marker{display:none}gx-map-marker[hidden]{display:none !important}gx-map-marker[hidden][invisible-mode=keep-space]{display:none !important;visibility:hidden}";

const MAX_POPUP_SIZE_FACTOR = 0.83;
const MapMarker = class {
    constructor(hostRef) {
        (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
        this.gxMapMarkerDidLoad = (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "gxMapMarkerDidLoad", 7);
        this.gxMapMarkerUpdate = (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "gxMapMarkerUpdate", 7);
        this.gxMapMarkerDeleted = (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.c)(this, "gxMapMarkerDeleted", 7);
        /**
         * The coordinates where the marker will appear in the map.
         *
         */
        this.coords = "0, 0";
        /**
         * The class that the marker will have.
         *
         * Set the `background-image` property to use it as icon of the marker.
         *
         */
        this.markerClass = "gx-default-icon";
        /**
         * The marker image height.
         *
         */
        this.iconHeight = 30;
        /**
         * The marker image width.
         *
         */
        this.iconWidth = 30;
    }
    getHalfSizes() {
        const halfIconSizes = {
            height: this.iconHeight / 2,
            width: this.iconWidth / 2
        };
        return halfIconSizes;
    }
    setupMarker(coords) {
        this.markerInstance = (0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.m)(coords, {
            icon: (0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.d)({
                className: this.markerClass,
                iconAnchor: [this.getHalfSizes().width, this.iconHeight],
                popupAnchor: [0, -this.getHalfSizes().height],
                iconSize: [this.iconWidth, this.iconHeight],
                tooltipAnchor: [0, -this.getHalfSizes().height]
            })
        });
    }
    setPopup() {
        const popupContainerEl = this.element.querySelector("[class='popup-data-container']");
        if (popupContainerEl.firstElementChild !== null) {
            const maxPopupSize = {
                height: document.querySelector(".gxMap").clientHeight * MAX_POPUP_SIZE_FACTOR,
                width: document.querySelector(".gxMap").clientWidth * MAX_POPUP_SIZE_FACTOR
            };
            this.markerInstance.bindPopup(popupContainerEl, {
                keepInView: true,
                maxHeight: maxPopupSize.height,
                maxWidth: maxPopupSize.width,
                minWidth: 100
            });
        }
    }
    componentDidLoad() {
        const coords = (0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.p)(this.coords);
        if (coords !== null) {
            this.setupMarker(coords);
        }
        else {
            console.warn("GX warning: Can not read 'coords' attribute, default coords set (gx-map-marker)", this.element);
            this.setupMarker([0, 0]);
        }
        this.setPopup();
        if (this.tooltipCaption) {
            this.markerInstance.bindTooltip(this.tooltipCaption, {
                direction: "top"
            });
        }
        this.gxMapMarkerDidLoad.emit(this.markerInstance);
    }
    componentDidUpdate() {
        const coords = (0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.p)(this.coords);
        if (coords !== null) {
            this.markerInstance.setLatLng(coords);
        }
        else {
            console.warn("GX warning: Can not read 'coords' attribute, default coords set (gx-map-marker)", this.element);
            this.markerInstance.setLatLng([0, 0]);
        }
        this.markerInstance.setIcon((0,_coordsValidate_cde38689_js__WEBPACK_IMPORTED_MODULE_1__.d)({
            className: this.markerClass,
            iconAnchor: [this.getHalfSizes().width, this.iconHeight],
            popupAnchor: [0, -this.getHalfSizes().height],
            iconSize: [this.iconWidth, this.iconHeight],
            tooltipAnchor: [0, -this.getHalfSizes().height]
        }));
        this.setPopup();
    }
    componentDidUnload() {
        this.gxMapMarkerDeleted.emit(this.markerInstance);
    }
    render() {
        return ((0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "popup-data-container" }, (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null)));
    }
    get element() { return (0,_index_10623738_js__WEBPACK_IMPORTED_MODULE_0__.g)(this); }
};
MapMarker.style = mapMarkerCss;




/***/ })

}]);
//# sourceMappingURL=node_modules_genexus_web-controls-library_dist_esm_gx-map_2_entry_js.js.map